% -----
% Pacotes necessários para a definição de comandos
% -----
\usepackage{xparse}
% -----

% -----
% Flags e outras variáveis de decisão
% -----

% --- Título ---
\newif\ifDefinidoSubtitulo{} \DefinidoSubtitulofalse{}

% --- Trabalho ---
\newif\ifDefinidoEstado{} \DefinidoEstadofalse{}
\newif\ifDefinidoEspecializacao{} \DefinidoEspecializacaofalse{}
\newif\ifDefinidoMestrado{} \DefinidoMestradofalse{}
\newif\ifDefinidoDoutorado{} \DefinidoDoutoradofalse{}

% --- Pessoas ---
\newif\ifDefinidoCoorientador{} \DefinidoCoorientadorfalse{}
\newif\ifDefinidoExaminadorUm{} \DefinidoExaminadorUmfalse{}
\newif\ifDefinidoExaminadorDois{} \DefinidoExaminadorDoisfalse{}
\newif\ifDefinidoExaminadorTres{} \DefinidoExaminadorTresfalse{}
\newif\ifDefinidoExaminadorQuatro{} \DefinidoExaminadorQuatrofalse{}

% --- Resumo ---
\newif\ifDefinidoPalavraChaveQuatro{} \DefinidoPalavraChaveQuatrofalse{}
\newif\ifDefinidoPalavraChaveCinco{} \DefinidoPalavraChaveCincofalse{}

% -----

% -----
% Variáveis de texto
% -----

% --- Título ---
\gdef\ValorDoTitulo{\imprimirtitulo}

\def\subtitulo#1{\gdef\ValorDoSubtitulo{#1}\DefinidoSubtitulotrue}

\gdef\ValorDoTituloCompleto{\ValorDoTitulo{}\ifDefinidoSubtitulo{}: \ValorDoSubtitulo{}\fi}

% --- Trabalho ---

\def\curso#1{\gdef\ValorDoCurso{#1}}

\def\dia#1{\gdef\ValorDoDia{#1}}
\def\mes#1{\gdef\ValorDoMes{#1}}
\def\ano#1{\gdef\ValorDoAno{#1}}
\gdef\ValorDaData{\ValorDoMes{}, \ValorDoAno{}}
\data{\ValorDaData}

\def\cidade#1{\gdef\ValorDaCidade{#1}}
\def\estado#1{\gdef\ValorDoEstado{#1} \DefinidoEstadotrue}
\def\pais#1{\gdef\ValorDoPais{#1}}

\gdef\ValorDoLocal{
    \ValorDaCidade{},
    \ifDefinidoEstado%
        \ValorDoEstado{},
    \fi
    \ValorDoPais{}
}

\renewcommand{\imprimirlocal}{\ValorDoLocal}

% -- Tipo do trabalho --

\def\grau#1{\gdef\ValorDoGrau{#1}}

\def\diploma#1{\gdef\ValorDoDiploma{#1}}

\def\departamento#1{\gdef\ValorDoDepartamento{#1}}

\def\tipoInterno#1{\gdef\ValorDoTipo{#1}}

\def\defineBacharelado{\grau{BACHAREL} \tipoInterno{Monografia} \diploma{Bacharelado} }

\def\defineLicenciatura{\grau{LICENCIADO} \tipoInterno{Monografia} \diploma{Licenciatura} }

\def\defineEspecializacao{\grau{ESPECIALISTA} \tipoInterno{Monografia} \diploma{Especializa\c{c}\~ao} \DefinidoEspecializacaotrue}

\def\defineMestrado{\grau{MESTRE} \tipoInterno{Disserta\c{c}\~{a}o} \diploma{Mestrado} \DefinidoMestradotrue}

\def\defineDoutorado{\grau{DOUTOR} \tipoInterno{Tese} \diploma{Doutorado} \DefinidoDoutoradotrue}

\ExplSyntaxOn%
\NewDocumentCommand{\checkTipo}{m}{%
    \str_case:nn {#1} {%
        {bacharelado} {\defineBacharelado{}}
            {licenciatura} {\defineLicenciatura{}}
            {especializacao} {\defineEspecializacao{}}
            {mestrado} {\defineMestrado{}}
            {doutorado} {\defineDoutorado{}}
            {default} {%
                \msg_error:nnn {custom} {invalid-option} {#1}
            }
    }
}

% Custom error message
\msg_new:nnn {custom} {invalid-option}
{%
    A~opção~``#1''~é~inválida.
    Opções~válidas~são:~bacharelado,~licenciatura,~especializacao,~mestrado,~doutorado.
}
\ExplSyntaxOff%

\def\tipo#1{%
    \checkTipo{#1}%
}
\tipotrabalho{\ValorDoTipo}

% --- Instituição ---

\def\instituicao#1#2#3{\gdef\ValorDaInstituicao{#1} \gdef\ValorDaSiglaDaInstituicao{#2}\gdef\ValorDaCidadeDaInstituicao{#3}}
\renewcommand{\imprimirinstituicao}{\ValorDaInstituicao}

\def\unidadeAcademica#1#2{\gdef\ValorDaUnidadeAcademica{#1} \gdef\ValorDaSiglaDaUnidadeAcademica{#2}}

\def\departamento#1#2{\gdef\ValorDoDepartamento{#1} \gdef\ValorDaSiglaDoDepartamento{#2}}

% --- Pessoas ---

\def\autor#1#2{\gdef\ValorDoUltimoSobrenomeDoAutor{#1} \gdef\ValorDoRestanteDoNomeDoAutor{#2} \gdef\ValorDoNomeCompletoDoAutor{#2 #1} \author{#2 #1}}

\def\orientador#1#2#3{\gdef\ValorDoTituloDoOrientador{#1} \gdef\ValorDoUltimoSobrenomeDoOrientador{#2} \gdef\ValorDoRestanteDoNomeDoOrientador{#3} \gdef\ValorDoNomeCompletoDoOrientador{#3 #2} \gdef\ValorDoNomeCompletoDoOrientadorComTitulo{#1 #3 #2}}
\renewcommand{\imprimirorientador}{\ValorDoNomeCompletoDoOrientador}
\renewcommand{\imprimirorientadorRotulo}{\ValorDoTituloDoOrientador}

\def\coorientador#1#2#3{\gdef\ValorDoTituloDoCoorientador{#1} \gdef\ValorDoUltimoSobrenomeDoCoorientador{#2} \gdef\ValorDoRestanteDoNomeDoCoorientador{#3} \gdef\ValorDoNomeCompletoDoCoorientador{#3\ #2} \gdef\ValorDoNomeCompletoDoCoorientadorComTitulo{#1\ #3\ #2} \DefinidoCoorientadortrue}

\renewcommand{\imprimircoorientador}{%
    \ifDefinidoCoorientador%
        \ValorDoNomeCompletoDoCoorientador{}%
    \else%
    \fi%
}
\renewcommand{\imprimircoorientadorRotulo}{%
    \ifDefinidoCoorientador%
        \ValorDoTituloDoCoorientador{}%
    \else%
    \fi%
}

\def\examinadorUm#1#2#3{\gdef\ValorDoTituloDoExaminadorUm{#1} \gdef\ValorDoUltimoSobrenomeDoExaminadorUm{#2} \gdef\ValorDoRestanteDoNomeDoExaminadorUm{#3} \gdef\ValorDoNomeCompletoDoExaminadorUm{#3\ #2} \gdef\ValorDoNomeCompletoDoExaminadorUmComTitulo{#1\ #3\ #2} \DefinidoExaminadorUmtrue}

\def\examinadorDois#1#2#3{\gdef\ValorDoTituloDoExaminadorDois{#1} \gdef\ValorDoUltimoSobrenomeDoExaminadorDois{#2} \gdef\ValorDoRestanteDoNomeDoExaminadorDois{#3} \gdef\ValorDoNomeCompletoDoExaminadorDois{#3\ #2} \gdef\ValorDoNomeCompletoDoExaminadorDoisComTitulo{#1\ #3\ #2} \DefinidoExaminadorDoistrue}

\def\examinadorTres#1#2#3{\gdef\ValorDoTituloDoExaminadorTres{#1} \gdef\ValorDoUltimoSobrenomeDoExaminadorTres{#2} \gdef\ValorDoRestanteDoNomeDoExaminadorTres{#3} \gdef\ValorDoNomeCompletoDoExaminadorTres{#3\ #2} \gdef\ValorDoNomeCompletoDoExaminadorTresComTitulo{#1\ #3\ #2} \DefinidoExaminadorTrestrue}

\def\examinadorQuatro#1#2#3{\gdef\ValorDoTituloDoExaminadorQuatro{#1} \gdef\ValorDoUltimoSobrenomeDoExaminadorQuatro{#2} \gdef\ValorDoRestanteDoNomeDoExaminadorQuatro{#3} \gdef\ValorDoNomeCompletoDoExaminadorQuatro{#3\ #2} \gdef\ValorDoNomeCompletoDoExaminadorQuatroComTitulo{#1\ #3\ #2} \DefinidoExaminadorQuatrotrue}

% --- Resumo ---
\ExplSyntaxOn%
\NewDocumentCommand{\palavrasChave}{m m m o o}
{%
    \gdef\ValorDaPalavraChaveUm{#1}
    \gdef\ValorDaPalavraChaveDois{#2}
    \gdef\ValorDaPalavraChaveTres{#3}
    \IfValueTF{#4}
    {\gdef\ValorDaPalavraChaveQuatro{#4} \DefinidoPalavraChaveQuatrotrue}
    {\gdef\ValorDaPalavraChaveQuatro{} \DefinidoPalavraChaveQuatrofalse}
    \IfValueTF{#5}
    {\gdef\ValorDaPalavraChaveCinco{#5} \DefinidoPalavraChaveCincotrue}
    {\gdef\ValorDaPalavraChaveCinco{} \DefinidoPalavraChaveCincofalse}
}
\ExplSyntaxOff%

\def\ValorDasPalavrasChave{
    \ValorDaPalavraChaveUm,
    \ValorDaPalavraChaveDois,
    \ValorDaPalavraChaveTres{}\ifDefinidoPalavraChaveQuatro,
    \ValorDaPalavraChaveQuatro\fi\ifDefinidoPalavraChaveCinco{},
    \ValorDaPalavraChaveCinco{}\fi
}

% -----

\def\testaVariaveis{
    \ValorDoTitulo{}

    {%
        \ifDefinidoSubtitulo{%
            Subtítulo está definido:
            \ValorDoSubtitulo{}
        }
        \else{%
            Subtítulo não está definido.
        }
        \fi
    }

    \ValorDoCurso{}

    \ValorDaData{}

    \ValorDoLocal{}

    \ValorDoTipo{}
    \ValorDoGrau{}
    \ValorDoDiploma{}

    \ValorDaInstituicao{}
    \ValorDaSiglaDaInstituicao{}

    \ValorDaUnidadeAcademica{}
    \ValorDaSiglaDaUnidadeAcademica{}

    \ValorDoDepartamento{}
    \ValorDaSiglaDoDepartamento{}

    \ValorDoUltimoSobrenomeDoAutor{} ---
    \ValorDoRestanteDoNomeDoAutor{} ---
    \ValorDoNomeCompletoDoAutor{}

    \ValorDoTituloDoOrientador{} ---
    \ValorDoUltimoSobrenomeDoOrientador{} ---
    \ValorDoRestanteDoNomeDoOrientador{} ---
    \ValorDoNomeCompletoDoOrientador{} ---
    \ValorDoNomeCompletoDoOrientadorComTitulo{}

    {%
        \ifDefinidoCoorientador{%
            Coorientador está definido:\\
            \ValorDoTituloDoCoorientador{} ---
            \ValorDoUltimoSobrenomeDoCoorientador{} ---
            \ValorDoRestanteDoNomeDoCoorientador{} ---
            \ValorDoNomeCompletoDoCoorientador{} ---
            \ValorDoNomeCompletoDoCoorientadorComTitulo{}
        }
        \else{%
            Coorientador não está definido.
        }
        \fi
    }

    {%
        \ifDefinidoExaminadorUm{%
            Examinador um está definido:\\
            \ValorDoTituloDoExaminadorUm{} ---
            \ValorDoUltimoSobrenomeDoExaminadorUm{} ---
            \ValorDoRestanteDoNomeDoExaminadorUm{} ---
            \ValorDoNomeCompletoDoExaminadorUm{} ---
            \ValorDoNomeCompletoDoExaminadorUmComTitulo{}
        }
        \else{%
            Examinador um não está definido.
        }
        \fi
    }

    {%
        \ifDefinidoExaminadorDois{%
            Examinador dois está definido:\\
            \ValorDoTituloDoExaminadorDois{} ---
            \ValorDoUltimoSobrenomeDoExaminadorDois{} ---
            \ValorDoRestanteDoNomeDoExaminadorDois{} ---
            \ValorDoNomeCompletoDoExaminadorDois{} ---
            \ValorDoNomeCompletoDoExaminadorDoisComTitulo{}
        }
        \else{%
            Examinador dois não está definido.
        }
        \fi
    }

    {%
        \ifDefinidoExaminadorTres{%
            Examinador três está definido:\\
            \ValorDoTituloDoExaminadorTres{} ---
            \ValorDoUltimoSobrenomeDoExaminadorTres{} ---
            \ValorDoRestanteDoNomeDoExaminadorTres{} ---
            \ValorDoNomeCompletoDoExaminadorTres{} ---
            \ValorDoNomeCompletoDoExaminadorTresComTitulo{}
        }
        \else{%
            Examinador três não está definido.
        }
        \fi
    }

    {%
        \ifDefinidoExaminadorQuatro{%
            Examinador quatro está definido:\\
            \ValorDoTituloDoExaminadorQuatro{} ---
            \ValorDoUltimoSobrenomeDoExaminadorQuatro{} ---
            \ValorDoRestanteDoNomeDoExaminadorQuatro{} ---
            \ValorDoNomeCompletoDoExaminadorQuatro{} ---
            \ValorDoNomeCompletoDoExaminadorQuatroComTitulo{}
        }
        \else{%
            Examinador quatro não está definido.
        }
        \fi
    }

    \ValorDaPalavraChaveUm{}
    \ValorDaPalavraChaveDois{}
    \ValorDaPalavraChaveTres{}
    \ValorDaPalavraChaveQuatro{}
    \ValorDaPalavraChaveCinco{}

    \ValorDasPalavrasChave{}

}
